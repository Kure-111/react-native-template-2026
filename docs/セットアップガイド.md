# セットアップガイド

このドキュメントは、プロジェクトのセットアップ手順を説明します。

## 必要な環境

- **Node.js:** v18 以上
- **npm:** v9 以上
- **Expo CLI:** 自動的にインストールされます

## 初回セットアップ

### 1. リポジトリをクローン

```bash
git clone https://github.com/your-username/react-native-expo-template-2026.git
cd react-native-expo-template-2026
```

### 2. 依存関係をインストール

```bash
npm install
```

### 3. 環境変数を設定

`.env.example` をコピーして `.env` を作成します：

```bash
cp .env.example .env
```

`.env` ファイルを編集して、必要な環境変数を設定します：

```env
# Supabase設定
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Google Apps Script設定（オプション）
EXPO_PUBLIC_GAS_WEB_APP_URL=https://script.google.com/macros/s/your-script-id/exec
```

### 4. アプリを起動

```bash
npm start
```

起動後、以下のオプションが表示されます：

- **`w`** - Web ブラウザで起動
- **`a`** - Android エミュレータで起動
- **`i`** - iOS シミュレータで起動（Mac のみ）

## トラブルシューティング

### キャッシュをクリアして起動

エラーが発生した場合は、キャッシュをクリアして再起動してください：

```bash
npm start -- --clear
```

### ポートが使用中の場合

別のプロセスがポート 8081 を使用している場合は、プロセスを停止するか、別のポートを使用してください：

```bash
# Windows
taskkill /F /IM node.exe

# Mac/Linux
killall node
```

### パッケージバージョンの不一致

警告が表示された場合は、推奨バージョンをインストールしてください：

```bash
npm install package-name@version
```

## 開発環境

### VS Code 拡張機能（推奨）

- **ES7+ React/Redux/React-Native snippets** - React スニペット
- **Prettier - Code formatter** - コードフォーマッター
- **ESLint** - Linter
- **Tailwind CSS IntelliSense** - Tailwind CSS の補完

### VS Code 設定

`.vscode/settings.json` に以下を追加：

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "tailwindCSS.experimental.classRegex": [
    ["className\\s*=\\s*[\"']([^\"']*)[\"']", "[\"']([^\"']*)[\"']"]
  ]
}
```

## Supabase セットアップ

### 1. Supabase プロジェクトを作成

1. [Supabase](https://supabase.com/) にアクセス
2. 新しいプロジェクトを作成
3. プロジェクト設定から URL と Anon Key を取得

### 2. 環境変数を設定

`.env` ファイルに Supabase の認証情報を追加：

```env
EXPO_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 3. データベースを設定

Supabase のダッシュボードで SQL エディタを開き、必要なテーブルを作成します。

詳細は [supabase/README.md](../supabase/README.md) を参照してください。

## Google Apps Script セットアップ（オプション）

GAS API を使用する場合は、以下の手順に従ってください。

### 1. GAS プロジェクトを作成

1. [Google Apps Script](https://script.google.com/) にアクセス
2. 新しいプロジェクトを作成
3. スクリプトを作成（例は [gas/README.md](../gas/README.md) を参照）

### 2. Web App としてデプロイ

1. 「デプロイ」→「新しいデプロイ」
2. 種類：Web アプリ
3. アクセスできるユーザー：全員
4. デプロイ URL をコピー

### 3. 環境変数を設定

`.env` ファイルに GAS の URL を追加：

```env
EXPO_PUBLIC_GAS_WEB_APP_URL=https://script.google.com/macros/s/xxxxx/exec
```

## ビルド

### Android APK をビルド

```bash
npm run android
eas build --platform android
```

### iOS IPA をビルド

```bash
npm run ios
eas build --platform ios
```

### Web をビルド

```bash
npm run web
expo build:web
```

## デプロイ

### Expo Go で公開

```bash
eas update
```

### Web をホスティング

```bash
npm run build:web
# ビルドされた web-build/ ディレクトリを Netlify や Vercel にデプロイ
```

## 参考リンク

- [Expo Documentation](https://docs.expo.dev/)
- [React Native Documentation](https://reactnative.dev/)
- [NativeWind Documentation](https://www.nativewind.dev/)
- [Supabase Documentation](https://supabase.com/docs)
